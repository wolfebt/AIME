<!--
    File: species.html
    Reference: Species Creator
    Creator: Wolfe.BT, TangentLLC
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIME - Species Creator</title>
    <link rel="stylesheet" href="../style/style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="../script/global-ui.js"></script>
    <script src="../script/element-bundle.js"></script>
</head>
<body>
    <header class="main-header">
        <div class="header-left">
            <a href="../index.html" class="logo-title animated-gradient">AIME</a>
            <button id="settings-btn" class="settings-btn" title="API Key Settings">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
            </button>
        </div>
        <nav class="main-nav">
            <a href="elements.html" class="active">Elements</a>
            <a href="writer.html">Writer</a>
            <a href="imaging.html">Imaging</a>
        </nav>
    </header>

    <main class="container">
        <div class="element-header">
            <h2 class="element-title animated-gradient">Species Creator</h2>
            <div class="header-actions">
                <p class="element-subtitle">Design the biology and culture of a new species.</p>
            </div>
        </div>
        <div class="workspace-layout">
            <div class="main-column">
                <div class="element-nav glass-panel">
                    <button class="element-nav-button active" data-tab="overview">Overview</button>
                    <button class="element-nav-button" data-tab="biology">Biology & Physiology</button>
                    <button class="element-nav-button" data-tab="psychology">Psychology & Cognition</button>
                    <button class="element-nav-button" data-tab="culture">Culture & Society</button>
                    <button class="element-nav-button" data-tab="ecology">Ecology & Habitat</button>
                    <button class="element-nav-button" data-tab="abilities">Abilities & Traits</button>
                    <button class="element-nav-button" data-tab="notes">Notes & Concepts</button>
                </div>

                <!-- Overview Tab -->
                <div id="overview-tab" class="element-tab active">
                    <div class="form-section glass-panel">
                        <div class="form-group"><label for="species-name">Species Name</label><input type="text" id="species-name" class="input-field" data-field-id="name" placeholder="Include common name and scientific/formal name, if applicable" autocomplete="off"></div>
                        <div class="form-group"><label for="species-homeworld">Homeworld / Plane of Origin</label><input type="text" id="species-homeworld" class="input-field" data-field-id="homeworld" autocomplete="off"></div>
                        <div class="form-group"><label for="species-sentience">Sentience Level</label><input type="text" id="species-sentience" class="input-field" data-field-id="sentience" placeholder="e.g., Non-sentient, Animal-level, Sentient, Hive Mind, God-like" autocomplete="off"></div>
                        <div class="form-group"><label for="species-description">General Description</label><textarea id="species-description" class="input-field" data-field-id="description" placeholder="A brief, one-paragraph summary of the species."></textarea></div>
                        <div class="form-group"><label for="species-concept">Core Concept / Archetype</label><textarea id="species-concept" class="input-field" data-field-id="concept" placeholder="e.g., 'Silicon-based lifeforms that communicate with light'"></textarea></div>
                    </div>
                </div>

                <!-- Biology & Physiology Tab -->
                <div id="biology-tab" class="element-tab sub-tab-container hidden">
                     <div class="sub-nav glass-panel">
                        <button class="sub-nav-button active" data-sub-tab="anatomy">Anatomy & Appearance</button>
                        <button class="sub-nav-button" data-sub-tab="systems">Internal Systems & Life Cycle</button>
                    </div>
                    <div id="anatomy-sub-tab" class="sub-tab-content active">
                        <div class="form-section glass-panel">
                            <div class="form-group"><label for="biology-appearance">General Appearance</label><textarea id="biology-appearance" class="input-field" data-field-id="appearance" placeholder="Overall body shape, size, notable features"></textarea></div>
                            <div class="form-group"><label for="biology-composition">Physical Composition</label><input type="text" id="biology-composition" class="input-field" data-field-id="composition" placeholder="e.g., Carbon-based, silicon-based, energy, crystalline" autocomplete="off"></div>
                            <div class="form-group"><label for="biology-skeletal">Skeletal Structure</label><input type="text" id="biology-skeletal" class="input-field" data-field-id="skeletal" placeholder="Endoskeleton, exoskeleton, hydrostatic, etc." autocomplete="off"></div>
                            <div class="form-group"><label for="biology-limbs">Limbs & Appendages</label><input type="text" id="biology-limbs" class="input-field" data-field-id="limbs" placeholder="Number and type of arms, legs, wings, tails, tentacles" autocomplete="off"></div>
                            <div class="form-group"><label for="biology-integument">Integument</label><input type="text" id="biology-integument" class="input-field" data-field-id="integument" placeholder="Skin, scales, fur, feathers, chitin, bark" autocomplete="off"></div>
                            <div class="form-group"><label for="biology-coloration">Coloration & Markings</label><textarea id="biology-coloration" class="input-field" data-field-id="coloration" placeholder="Patterns, camouflage, display colors"></textarea></div>
                            <div class="form-group"><label for="biology-head">Head & Facial Features</label><textarea id="biology-head" class="input-field" data-field-id="head" placeholder="Eyes, mouth, sensory organs"></textarea></div>
                        </div>
                    </div>
                    <div id="systems-sub-tab" class="sub-tab-content hidden">
                        <div class="form-section glass-panel">
                            <div class="form-group"><label for="biology-diet">Diet & Metabolism</label><textarea id="biology-diet" class="input-field" data-field-id="diet" placeholder="Carnivore, herbivore, omnivore, lithovore, photosynthesizer"></textarea></div>
                            <div class="form-group"><label for="biology-senses">Senses</label><textarea id="biology-senses" class="input-field" data-field-id="senses" placeholder="Sight, hearing, smell, touch, taste, and any unique senses"></textarea></div>
                            <div class="form-group"><label for="biology-reproduction">Reproduction</label><textarea id="biology-reproduction" class="input-field" data-field-id="reproduction" placeholder="Sexual, asexual, budding, spawning; mating rituals, gestation period, number of offspring"></textarea></div>
                            <div class="form-group"><label for="biology-lifecycle">Life Cycle & Maturation</label><textarea id="biology-lifecycle" class="input-field" data-field-id="lifecycle" placeholder="Stages of life from birth to death; average lifespan"></textarea></div>
                            <div class="form-group"><label for="biology-sleep">Sleep/Rest Patterns</label><textarea id="biology-sleep" class="input-field" data-field-id="sleep" placeholder="Nocturnal, diurnal, hibernation, torpor"></textarea></div>
                            <div class="form-group"><label for="biology-vulnerabilities">Vulnerabilities & Resistances</label><textarea id="biology-vulnerabilities" class="input-field" data-field-id="vulnerabilities" placeholder="Susceptibility to diseases, toxins, radiation; natural immunities"></textarea></div>
                        </div>
                    </div>
                </div>

                <!-- Psychology & Cognition Tab -->
                <div id="psychology-tab" class="element-tab hidden">
                    <div class="form-section glass-panel">
                        <div class="form-group"><label for="psych-intelligence">Intelligence & Problem-Solving</label><textarea id="psych-intelligence" class="input-field" data-field-id="intelligence" placeholder="How do they think? Logical, intuitive, creative, analytical"></textarea></div>
                        <div class="form-group"><label for="psych-communication">Primary Method of Communication</label><textarea id="psych-communication" class="input-field" data-field-id="communication" placeholder="Spoken language, telepathy, chemical signals, light patterns, body language"></textarea></div>
                        <div class="form-group"><label for="psych-drives">Dominant Instincts & Drives</label><textarea id="psych-drives" class="input-field" data-field-id="drives" placeholder="Survival, procreation, hierarchy, curiosity, conquest"></textarea></div>
                        <div class="form-group"><label for="psych-temperament">Temperament & Disposition</label><textarea id="psych-temperament" class="input-field" data-field-id="temperament" placeholder="Generally aggressive, passive, curious, xenophobic, friendly"></textarea></div>
                        <div class="form-group"><label for="psych-emotions">Emotional Range</label><textarea id="psych-emotions" class="input-field" data-field-id="emotions" placeholder="Do they feel emotions like humans? Or something different?"></textarea></div>
                        <div class="form-group"><label for="psych-memory">Memory & Learning</label><textarea id="psych-memory" class="input-field" data-field-id="memory" placeholder="How do they retain and pass on information?"></textarea></div>
                        <div class="form-group"><label for="psych-self-concept">Concept of Self</label><input type="text" id="psych-self-concept" class="input-field" data-field-id="self_concept" placeholder="Individualistic, collectivist, hive-minded" autocomplete="off"></div>
                    </div>
                </div>

                <!-- Culture & Society Tab -->
                <div id="culture-tab" class="element-tab sub-tab-container hidden">
                    <div class="sub-nav glass-panel">
                        <button class="sub-nav-button active" data-sub-tab="organization">Social Organization</button>
                        <button class="sub-nav-button" data-sub-tab="traditions">Traditions & Technology</button>
                    </div>
                    <div id="organization-sub-tab" class="sub-tab-content active">
                        <div class="form-section glass-panel">
                            <div class="form-group"><label for="culture-structure">Social Structure</label><textarea id="culture-structure" class="input-field" data-field-id="social_structure" placeholder="e.g., Clans, hives, herds, nuclear families, solitary, complex nation-states"></textarea></div>
                            <div class="form-group"><label for="culture-government">Government & Politics</label><textarea id="culture-government" class="input-field" data-field-id="government" placeholder="Monarchy, democracy, council, theocracy, anarchy"></textarea></div>
                            <div class="form-group"><label for="culture-laws">Laws & Ethics</label><textarea id="culture-laws" class="input-field" data-field-id="laws" placeholder="What is considered right and wrong? How is justice administered?"></textarea></div>
                            <div class="form-group"><label for="culture-hierarchy">Social Hierarchy</label><textarea id="culture-hierarchy" class="input-field" data-field-id="hierarchy" placeholder="Caste systems, class structures, meritocracy"></textarea></div>
                            <div class="form-group"><label for="culture-gender-roles">Gender Roles & Family Structure</label><textarea id="culture-gender-roles" class="input-field" data-field-id="gender_roles"></textarea></div>
                        </div>
                    </div>
                    <div id="traditions-sub-tab" class="sub-tab-content hidden">
                        <div class="form-section glass-panel">
                            <div class="form-group"><label for="culture-language">Language(s)</label><input type="text" id="culture-language" class="input-field" data-field-id="language" placeholder="Written and/or spoken" autocomplete="off"></div>
                            <div class="form-group"><label for="culture-technology">Technology Level</label><input type="text" id="culture-technology" class="input-field" data-field-id="technology" placeholder="e.g., Stone Age, Industrial, Information Age, Interstellar" autocomplete="off"></div>
                            <div class="form-group"><label for="culture-arts">Arts & Aesthetics</label><textarea id="culture-arts" class="input-field" data-field-id="arts" placeholder="Music, visual art, architecture, storytelling"></textarea></div>
                            <div class="form-group"><label for="culture-religion">Religion, Spirituality, & Mythology</label><textarea id="culture-religion" class="input-field" data-field-id="religion" placeholder="Beliefs about creation, death, and the universe"></textarea></div>
                            <div class="form-group"><label for="culture-rituals">Traditions & Rituals</label><textarea id="culture-rituals" class="input-field" data-field-id="rituals" placeholder="Holidays, rites of passage, ceremonies"></textarea></div>
                            <div class="form-group"><label for="culture-cuisine">Diet & Cuisine</label><textarea id="culture-cuisine" class="input-field" data-field-id="cuisine" placeholder="What they eat and how they prepare it"></textarea></div>
                        </div>
                    </div>
                </div>

                <!-- Ecology & Habitat Tab -->
                <div id="ecology-tab" class="element-tab hidden">
                    <div class="form-section glass-panel">
                        <div class="form-group"><label for="ecology-homeworld-desc">Homeworld Description</label><textarea id="ecology-homeworld-desc" class="input-field" data-field-id="homeworld_description" placeholder="Planet type, climate, geography, flora, fauna"></textarea></div>
                        <div class="form-group"><label for="ecology-niche">Habitat/Niche</label><textarea id="ecology-niche" class="input-field" data-field-id="niche" placeholder="What role do they fill in their ecosystem?"></textarea></div>
                        <div class="form-group"><label for="ecology-relationships">Relationship with Other Species</label><textarea id="ecology-relationships" class="input-field" data-field-id="eco_relationships" placeholder="Predator, prey, symbiotic, parasitic, competitive"></textarea></div>
                        <div class="form-group"><label for="ecology-resources">Resource Needs</label><textarea id="ecology-resources" class="input-field" data-field-id="resources" placeholder="What do they need from their environment to survive and thrive?"></textarea></div>
                        <div class="form-group"><label for="ecology-architecture">Architecture & Habitations</label><textarea id="ecology-architecture" class="input-field" data-field-id="architecture" placeholder="How and where do they build their homes?"></textarea></div>
                    </div>
                </div>

                <!-- Abilities & Traits Tab -->
                <div id="abilities-tab" class="element-tab hidden">
                    <div class="form-section glass-panel">
                        <div class="form-group"><label for="abilities-inherent">Inherent Abilities</label><textarea id="abilities-inherent" class="input-field" data-field-id="inherent_abilities" placeholder="Natural camouflage, flight, venom, regeneration, telekinesis, etc."></textarea></div>
                        <div class="form-group"><label for="abilities-strengths">Species-Specific Strengths</label><textarea id="abilities-strengths" class="input-field" data-field-id="strengths" placeholder="e.g., Great physical strength, high intelligence, resistance to heat"></textarea></div>
                        <div class="form-group"><label for="abilities-weaknesses">Species-Specific Weaknesses</label><textarea id="abilities-weaknesses" class="input-field" data-field-id="weaknesses" placeholder="e.g., Vulnerability to cold, dependency on a rare mineral"></textarea></div>
                        <div class="form-group"><label for="abilities-unique">Unique Biological Features</label><textarea id="abilities-unique" class="input-field" data-field-id="unique_features" placeholder="Bioluminescence, ability to shapeshift, symbiotic relationship"></textarea></div>
                    </div>
                </div>

                <!-- Notes & Concepts Tab -->
                <div id="notes-tab" class="element-tab sub-tab-container hidden">
                    <div class="sub-nav glass-panel">
                        <button class="sub-nav-button active" data-sub-tab="notes-general">General Notes</button>
                        <button class="sub-nav-button" data-sub-tab="notes-gallery">Inspiration Gallery</button>
                    </div>
                    <div id="notes-general-sub-tab" class="sub-tab-content active">
                        <div class="form-section glass-panel">
                            <div class="form-group">
                                <textarea id="custom-notes" class="input-field" data-field-id="custom_notes" placeholder="Plot hooks, ideas for individuals, naming conventions, etc." autocomplete="off"></textarea>
                            </div>
                        </div>
                    </div>
                    <div id="notes-gallery-sub-tab" class="sub-tab-content hidden">
                        <div class="form-section glass-panel">
                            <div class="form-group">
                                <label for="species-gallery">Inspiration Gallery</label>
                                <textarea id="species-gallery" class="input-field" data-field-id="gallery" placeholder="An area for images: real-world animals, concept art, landscapes, etc."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="response-container" class="response-container glass-panel" contenteditable="true"></div>
            </div>
            <div class="resize-handle"></div>
            <div class="side-column">
                <div class="accordion glass-panel active">
                    <button class="accordion-header active">
                        <span>Generation Controls</span>
                        <svg class="accordion-chevron" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                    </button>
                    <div class="accordion-content">
                        <div class="generation-controls-buttons">
                            <button id="generate-button" data-element-type="SPECIES" class="generate-btn-large">Generate</button>
                            <button id="iterate-button" class="generate-btn-large hidden">Iterate</button>

                            <div id="update-field-container" class="form-group hidden">
                                <label for="update-instructions">Update Instructions</label>
                                <textarea id="update-instructions" class="input-field" placeholder="e.g., Make them amphibious..."></textarea>
                            </div>

                            <div class="generation-controls-row">
                                <button id="save-prompt-button" class="action-btn">Save Prompt</button>
                                <button id="save-content-button" class="action-btn">Save Content</button>
                            </div>

                            <div class="generation-controls-row">
                                <button id="load-button" class="action-btn">Load</button>
                                <button id="new-button" class="action-btn">New</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="side-panel-container">
                    <div class="accordion glass-panel">
                        <button class="accordion-header">
                            <span>Guidance</span>
                            <svg class="accordion-chevron" width="24" height="24" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content">
                            <div id="guidance-gems-container"></div>
                        </div>
                    </div>
                    <div class="asset-hub-panel glass-panel">
                        <h3 class="side-panel-title">Asset Hub</h3>
                        <div class="asset-hub-container">
                            <p class="asset-hub-subtitle">Import files to provide contextual reference for this Species.</p>
                            <div class="asset-import-area">
                                <input type="file" id="asset-upload" multiple="" style="display: none;">
                                <button id="import-asset-btn" class="import-btn">Import Asset(s)</button>
                            </div>
                            <div id="asset-list" class="asset-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- NEW Floating Text Toolbar -->
    <div id="text-toolbar" class="glass-panel hidden">
        <button class="toolbar-btn" data-action="rephrase">Rephrase</button>
        <button class="toolbar-btn" data-action="shorten">Shorten</button>
        <button class="toolbar-btn" data-action="expand">Expand</button>
        <button class="toolbar-btn" data-action="custom">Custom...</button>
        <div id="custom-prompt-container" class="hidden">
            <input type="text" id="custom-prompt-input" placeholder="e.g., make this more dramatic">
            <button id="custom-prompt-submit">Go</button>
        </div>
    </div>

    <!-- Toast Notification Container -->
    <div id="toast-container"></div>

    <!-- Settings Modal -->
    <div id="settings-modal-overlay" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3>API Key Settings</h3>
                <button id="modal-close-btn" class="modal-close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p>Please enter your Gemini API key below. This key will be stored securely in your browser's local storage.</p>
                <div class="form-group">
                    <label for="api-key-input">Gemini API Key</label>
                    <div class="password-input-wrapper">
                        <input type="password" id="api-key-input" class="input-field" placeholder="Enter your API key">
                        <button id="view-api-key" class="view-api-key-btn" title="Show/Hide Key">👁</button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="modal-save-btn" class="generate-btn-large">Save Key</button>
            </div>
        </div>
    </div>

    <!-- Guidance Selection Modal -->
    <div id="gem-selection-modal-overlay" class="modal-overlay hidden">
        <div class="modal-content glass-panel">
            <div class="modal-header">
                <h3 id="gem-modal-title">Select Options</h3>
                <button id="gem-modal-close-btn" class="modal-close-btn">&times;</button>
            </div>
            <div id="gem-modal-options-container" class="modal-body">
                <!-- Clickable option buttons will be dynamically inserted here -->
            </div>
            <div class="gem-modal-custom-input-area">
                <input type="text" id="custom-gem-input" class="input-field" placeholder="Add a custom option...">
                <button id="add-custom-gem-btn" class="action-btn">Add</button>
            </div>
            <div class="modal-footer">
                <button id="gem-modal-save-btn" class="generate-btn-large">Save Selections</button>
            </div>
        </div>
    </div>
</body>
</html>